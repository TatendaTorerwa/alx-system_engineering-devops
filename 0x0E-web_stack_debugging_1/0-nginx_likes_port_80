#!/usr/bin/env bash
# Configures an Nginx server to listen on port 80
# Install necessary tools
sudo apt-get update
sudo apt-get install -y net-tools

# Check Nginx configuration
sudo nginx -t

# Check current listening ports
if sudo netstat -tulpn | grep -q :80; then
  echo "Nginx is already listening on port 80."
else
  echo "Nginx is not currently listening on port 80. Checking and fixing..."

  # Additional debugging steps go here, such as checking logs and updating configuration.

  # Restart Nginx
  sudo service nginx restart

  # Check listening ports again
  if sudo netstat -tulpn | grep -q :80; then
    echo "Nginx is now listening on port 80."
  else
    echo "Failed to make Nginx listen on port 80."
  fi
fi
